# ============================================
# Prometheus Configuration — RADEO Platform
# ============================================
global:
  scrape_interval: 15s
  evaluation_interval: 15s
  scrape_timeout: 10s

scrape_configs:
  # ---- Traefik metrics (already exposes /metrics) ----
  - job_name: "traefik"
    static_configs:
      - targets: ["traefik:8080"]
    metrics_path: /metrics

  # ---- MinIO metrics ----
  - job_name: "minio"
    static_configs:
      - targets: ["minio:9000"]
    metrics_path: /minio/v2/metrics/cluster

  # ---- Backend Node.js (prom-client /api/metrics) ----
  - job_name: "backend"
    static_configs:
      - targets: ["backend:5000"]
    metrics_path: /api/metrics
    scheme: http
    # Backend metrics are behind auth in prod — use bearer token
    # Uncomment and set token if METRICS_BEARER_TOKEN is configured
    # authorization:
    #   type: Bearer
    #   credentials: "${METRICS_BEARER_TOKEN}"
